@page "/Register"
@using WithinBudget.Components
@inject HttpClient Http
@inject NavigationManager Navigation

<MudPaper Class="pa-4 mx-auto mt-12 border" Style="max-width:400px;">
    <MudText Typo="Typo.h5">Register</MudText>
    <MudTextField @bind-Value="_model.FirstName" Label="First Name" Required="true" FullWidth="true" />
    <MudTextField @bind-Value="_model.LastName" Label="Last Name" Required="true" FullWidth="true" />
    <MudTextField @bind-Value="_model.Email" Label="Email" Required="true" FullWidth="true" />
    <MudTextField 
        @bind-Value="_model.Password" 
        Label="Password" 
        InputType="@(_showPassword ? InputType.Text : InputType.Password)" 
        Required="true" 
        FullWidth="true"
        Adornment="Adornment.End"
        AdornmentIcon="@(_showPassword ? Icons.Material.Filled.Visibility : Icons.Material.Filled.VisibilityOff)"
        OnAdornmentClick="TogglePasswordVisibility"
    />

    <MudButton OnClick="AttemptRegister" Color="Color.Primary" Variant="Variant.Filled" Class="mt-4" FullWidth="true">
        Register
    </MudButton>

    <MudText Class="mt-2">
        Already have an account? <MudLink Href="/">Login here</MudLink>
    </MudText>
</MudPaper>

@if (_errorMessages.Errors.Any())
{
    <ApiErrorCard ApiError="_errorMessages" />
}
